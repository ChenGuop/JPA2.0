{
  "name": "Jpa2.0 lean",
  "tagline": "JPA2.0 @Id",
  "body": "# 4.5 映射主键\r\n@(2016/08//03)[ChenGuop]\r\n\r\n[TOC]\r\n\r\n> 用@Id注解, 标识符和主键\r\n\r\n## 重写主键列 `@Column`\r\n## 标识符生成\r\n\r\n> `@GenerartedValue`  (主键生成策略)\r\n> startegy `GenerationType`:(AUTO 、TABLE、SEQUENCE、IDENTITY)\r\n\r\n### 1.自动的生成 AUTO\r\n\r\n``` java\r\n@Entity\r\npublic class Employee{\r\n  @Id @GeneratedValue(startegy=GenerationType.AUTO)\r\n  private int id;\r\n \r\n}\r\n\t\r\n```\r\n\r\n### 2. 使用表的id生成 \r\n \r\n> 使用一个数据库表，可移植性好，一个id生成表应该拥有两列，1.是string类型：标示特定的生成器序列（主键），2.int 类型存储实际正在生成的id序列。使用：`startegy=GenerationType.TABLE` \r\n> ``` java \r\n @TableGeneratorname(name=\"Emp_Gen\")\r\n @Id @GeneratedValue(startegy=GenerationType.TABLE)\r\n  private int id; \r\n>```\r\n\r\n--------------\r\n> 指定用于id存储的表，\r\n>```java \r\n @TableGeneratorname(name=\"Emp_Gen\")\r\n @Id @GeneratedValue(generator=\"Emp_Gen\")\r\n  private int id; \r\n  \r\n>```\r\n\r\n------------------------\r\n\r\n> 进一步限定方法将指定表的详细信息\r\n> `table`:指定表名称\r\n> `pkColumnName`;唯一标示生成器的主键列的名称\r\n> `valueColumnName`:存储实际生成的id序列值的列的名称\r\n-\t\t\t表名：`ID_GEN `\r\n\r\n>| GEN_NAME  |    GEN_VAL |\r\n>| :--------: | :--------:| \r\n>| Emp_Gen    |   0  |\r\n\r\n\r\n>``` java\r\n@TableGenerator(name=\"Emp_Gen\",\r\n  table=\"ID_GEN\",\r\n  pkcolnmuName=\"GEN_NAME\",\r\n  valueColumnName=\"GEN_VAL\")\r\n\r\n>```\r\n\r\n### 3.使用数据库序列的id生成(SEQUENCE)\r\n> - 没有命名任何生成器\r\n> \r\n> ```java\r\n @Id @GeneratedValue(startegy=GenerationType.SEQUENCE)\r\n  private int id; \r\n> ```\r\n\r\n------------------\r\n\r\n> - 命名的序列生成器`@GeneratoredValue`\r\n\r\n> ```java\r\n  @SequenceGenerator(name=\"Emp_Gen\",sequenceName=\"Emp_Seq\")\r\n  @Id @GeneratedValue(generator=\"Emp_Gen\")\r\n  private int id; \r\n  \r\n> ```\r\n创建一个序列SQL如下：\r\n> ```sql\r\nCRATE SEQUENCE Emp_Seq\r\n\tMINVALUE 1\r\n\tSTART WITH 1\r\n\tINCREMENT BY 50\r\n> ```\r\n\r\n### 4.使用数据库标示符的id生成\r\n\r\n**IDENTITY  需要数据库支持一个主键标示符列**`需要底层数据库支持`\r\n\r\n> 与其他id生成策略之间的差异：只有当插入发生之后才可以访问标示符，但是其他的生成至少可以提前分配标识符。\r\n\r\n```java\r\n @Id @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n  private int id; \r\n  \r\n```\r\n\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}